function checkLoginState(){FB.getLoginStatus(function(n){statusChangeCallback(n)})}function statusChangeCallback(n){Validar(n)}function AutenticarDesdeFacebook(n){FB.api("/me",{fields:"id,first_name,last_name,email"},function(t){$("#btnIngresoUsuarioPop").hide();$("#btnIngresoUsuarioPopCargando").show();var i=t.id,r=t.first_name,u=t.last_name,f=t.email,e=n.authResponse.accessToken,o=""+window.location.href.replace("#","")+"";$.ajax({url:sitio+"Registro/LogueoDesdeFacebook/",type:"POST",headers:{__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},dataType:"json",data:JSON.stringify({accessToken:e,idFacebook:i,firstName:r,last_name:u,email:f,returnUrl:o}),contentType:"application/json; charset=utf-8",success:function(n){n.Exito?(n.IPCO!=null&&localStorageSuported()&&localStorage.setItem("IPCO",n.IPCO),n.EsRegistro?dataLayer.push({event:"Register",tipoRegistro:"FacebookConnect"}):dataLayer.push({event:"Logged",registroCompleto:n.RegistroCompleto}),$(location).attr("href",n.ReturnUrl)):($("#btnIngresoUsuarioPop").show(),$("#btnIngresoUsuarioPopCargando").hide())},error:function(){$("#btnIngresoUsuarioPop").show();$("#btnIngresoUsuarioPopCargando").hide()}})})}function Validar(n){FB.api("/me/permissions",function(t){var i=!0,r=$("#divLoginWarning"),u=$("#lidivLoginWarningMsj4");$.each(t.data,function(n,t){var r=t.status,u=t.permission;r==="declined"&&(i=!1)});i&&n.status==="connected"?(r.hide(),AutenticarDesdeFacebook(n)):(r.show(),u.show())})}function FacebookLogin(){FB.login(function(n){statusChangeCallback(n)},{scope:"public_profile,email"})}(function(n,t,i){var r,u=n.getElementsByTagName(t)[0];n.getElementById(i)||(r=n.createElement(t),r.id=i,r.async=!0,r.src="//connect.facebook.net/es_LA/sdk.js",u.parentNode.insertBefore(r,u))})(document,"script","facebook-jssdk");window.fbAsyncInit=function(){FB._https=!0;FB.init({appId:"1751414638477283",xfbml:!0,version:"v2.8"});FB.AppEvents.logPageView()};$(document).ready(function(){navigator.userAgent.match(/msie/i)&&navigator.userAgent.match(/trident/i)||$("#sectionFaceConnect").show()})